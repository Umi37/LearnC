# 🧠 C 프로그램의 메모리 영역 정리 (`.data`, `.bss`, `.rodata`, 스택, 힙)

C 언어로 작성된 프로그램이 실행될 때, 메모리는 여러 **영역(Segment)**으로 나뉘어 관리된다.  
그중 우리가 주로 다룬 영역은 다음과 같다:

---

## ✅ 전체 메모리 구성 요약

```
+----------------------------+
| 코드 영역 (.text)         | ⬅ 실행 명령어 (함수 등)
+----------------------------+
| 상수 데이터 (.rodata)     | ⬅ 읽기 전용 데이터 (문자열 리터럴 등)
+----------------------------+
| 초기화된 전역/정적 변수 (.data) |
+----------------------------+
| 초기화되지 않은 전역/정적 변수 (.bss) |
+----------------------------+
| 힙 (Heap)                 | ⬅ malloc/free 사용 영역
+----------------------------+
| 스택 (Stack)             | ⬅ 함수 호출 시 지역 변수 저장
+----------------------------+
```

---

## 📦 각 메모리 영역 설명

### 🔸 1. `.rodata` (Read-Only Data Segment)

| 항목 | 설명 |
|------|------|
| 용도 | **읽기 전용 데이터 저장 공간** |
| 특징 | 수정 불가, 읽기만 가능 |
| 예시 | 문자열 리터럴, `const char* s = "hello";` |
| 위험 | 수정 시 Segmentation Fault 발생 |

---

### 🔸 2. `.data` (초기화된 전역/정적 변수)

| 항목 | 설명 |
|------|------|
| 용도 | **초기값이 있는 전역/정적 변수 저장** |
| 특징 | 읽기/쓰기 가능 |
| 예시 | `static int count = 5;`, `int g = 3;` |
| 생명주기 | 프로그램 시작~종료까지 유지 |

---

### 🔸 3. `.bss` (초기화되지 않은 전역/정적 변수)

| 항목 | 설명 |
|------|------|
| 용도 | **초기값 없는 전역/정적 변수 저장** |
| 특징 | 실행 시 자동으로 0으로 초기화됨 |
| 예시 | `static int counter;`, `int total;` |
| 생명주기 | 프로그램 전체에서 유지됨 |

---

### 🔸 4. Heap (힙)

| 항목 | 설명 |
|------|------|
| 용도 | **동적 메모리 할당 영역** |
| 할당 함수 | `malloc()`, `calloc()`, `realloc()` |
| 해제 함수 | `free()` |
| 특징 | 개발자가 직접 메모리 해제해야 함 |
| 위험 | `free()` 누락 → 메모리 누수, 중복 해제 → UB |

---

### 🔸 5. Stack (스택)

| 항목 | 설명 |
|------|------|
| 용도 | **함수 호출 시 생성되는 지역 변수 저장** |
| 특징 | 함수 호출 시 쌓이고, 종료 시 자동 해제 |
| 예시 | `int x;` (함수 내부에서 선언된 지역 변수) |
| 위험 | 함수 종료 후 변수 접근 시 → 댕글링 포인터 |

---

## 🧠 정리 요약 표

| 영역     | 저장 대상                   | 접근 가능 | 생명주기              | 예시                              |
|----------|------------------------------|------------|------------------------|-----------------------------------|
| `.rodata`| 문자열 리터럴, 상수         | 읽기 전용 | 프로그램 전체         | `const char* s = "abc";`          |
| `.data`  | 초기화된 전역/정적 변수     | 읽기/쓰기 | 프로그램 전체         | `static int x = 5;`               |
| `.bss`   | 초기화되지 않은 전역/정적 변수 | 읽기/쓰기 | 프로그램 전체         | `static int y;`                   |
| Heap     | 동적 할당한 데이터          | 읽기/쓰기 | `free()` 전까지 유지  | `char* p = malloc(100);`          |
| Stack    | 지역 변수, 매개변수         | 읽기/쓰기 | 함수 종료 시 자동 해제 | `int a = 0;` (함수 내부)         |

---

## ✅ 핵심 기억 포인트

- 📌 문자열 리터럴은 **`rodata`**에 저장 → 수정 불가!
- 📌 `static` 변수는 **`.data` 또는 `.bss`** → 프로그램 전체에서 유지됨
- 📌 `malloc()`으로 할당한 메모리는 **Heap** → 직접 `free()`로 관리
- 📌 지역 변수는 **Stack** → 함수 끝나면 사라짐

---

