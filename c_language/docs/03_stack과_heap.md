# 🧠 스택(Stack)과 힙(Heap) 메모리 확장 방향 (주소 예시로 이해하기)

C 프로그램의 메모리 구조에서 **스택**과 **힙**은 서로 다른 방향으로 확장되며,  
주소값의 흐름 또한 서로 반대다.

---

## ✅ 가정하는 메모리 공간

- 전체 메모리 주소: `0x00000000` ~ `0xFFFFFFFF` (32비트 가상 주소 공간)

---

## 📦 메모리 전체 구조 예시

```
[높은 주소] (0xFFFFFFFF)
+------------------------------+
| 스택 (Stack) 시작            |
| 함수 호출 시 아래로 확장 (⬇)  |
| 예: 0xFFFEFFFF → 0xFFFEFF00 → 0xFFFEFE00 ...
+------------------------------+
| (미사용 공간)                |
+------------------------------+
| 힙 (Heap) 시작               |
| malloc() 호출 시 위로 확장 (⬆) |
| 예: 0x10000000 → 0x10000100 → 0x10000200 ...
+------------------------------+
| 전역/정적 변수 (.data/.bss)  |
+------------------------------+
| 코드 영역 (.text)            |
+------------------------------+
[낮은 주소] (0x00000000)

```

---

## 🎯 스택과 힙의 위치 및 확장 방향 요약

| 항목   | 위치 예시          | 확장 방향          | 주소 흐름 예시                      |
|--------|---------------------|---------------------|-------------------------------------|
| 스택 (Stack) | 높은 주소 (0xFFFEFFFF 근처) | 아래로 감소 (⬇) | 0xFFFEFFFF → 0xFFFEFF00 → 0xFFFEFE00 |
| 힙 (Heap) | 낮은 주소 (0x10000000 근처) | 위로 증가 (⬆) | 0x10000000 → 0x10000100 → 0x10000200 |


---

## ✅ 핵심 문장 요약

- 스택(Stack)은 **높은 주소**에서 시작하여,  
  **함수 호출이나 지역 변수 생성 시 주소가 작아지는 방향(⬇)**으로 확장된다.
- 힙(Heap)은 **낮은 주소**에서 시작하여,  
  **malloc() 호출마다 주소가 커지는 방향(⬆)**으로 확장된다.
- 따라서 절대 주소를 기준으로 보면 항상  
  **힙 주소 < 스택 주소**가 성립한다.

---

## 🔥 쉽게 기억하는 팁

| 키워드        | 의미 |
|---------------|------|
| 스택은 아래로 쌓인다 | 함수 호출할수록 주소 감소 (⬇) |
| 힙은 위로 쌓인다 | malloc() 할수록 주소 증가 (⬆) |
| 힙 아래, 스택 위 | 힙은 낮은 주소, 스택은 높은 주소에 위치 |

---

## ⚡ 보너스: 힙과 스택 충돌

- 힙과 스택은 **중간의 비어 있는 영역을 사이에 두고 서로 반대 방향으로 자람**.
- 만약 둘이 만나면 → **힙 오버플로우(Heap Overflow)** 또는 **스택 오버플로우(Stack Overflow)** 발생!
- 이 경우 프로그램이 비정상 종료되거나 Segmentation Fault가 발생할 수 있음.

---
